services:
  claude-code-webui:
    build: .
    container_name: claude-code-webui
    restart: unless-stopped
    # Add docker group (GID 281 on Unraid) for docker.sock access
    group_add:
      - "281"
    ports:
      - "5174:3001"
    environment:
      - NODE_ENV=production
      - SESSION_SECRET=${SESSION_SECRET:-changeme-session-secret-at-least-32-chars}
      - JWT_SECRET=${JWT_SECRET:-changeme-jwt-secret-at-least-32-chars}
      - FRONTEND_URL=http://ProliantG9:5174
      - ALLOWED_BASE_PATHS=/mnt/user
      # Set your email here for display in the UI
      - CLAUDE_USER_EMAIL=${CLAUDE_USER_EMAIL:-}
      # Gemini API Key for image generation
      - GEMINI_API_KEY=AIzaSyCuBuCa6ZSVt5KZgl55Wk_F1DJSgfbTxHY
    volumes:
      # Persist database
      - ./data:/app/packages/backend/data
      # Mount Claude credentials and config from host to container user's home
      - /root/.claude:/home/node/.claude
      # Mount Gemini config (for authenticated Gemini CLI)
      - /root/.gemini:/home/node/.gemini
      # Mount Unraid user shares for project access
      - /mnt/user:/mnt/user
      # Docker socket for container access
      - /var/run/docker.sock:/var/run/docker.sock
    networks:
      - claude-network

networks:
  claude-network:
    driver: bridge
